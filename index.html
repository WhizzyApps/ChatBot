<!DOCTYPE html>
<html style="height: 100%;">
    <head>
        <link rel="stylesheet" href="styles.css">
</head>

    <body class="body">

        <div class="chat-container">
            <div class="bot-text-container">
                <div class="text bot">
                    Hi, I'm MyGPT, the AI powered chatbot. How can I help you?
                </div>
            </div>
        </div>

        <div class="input-container">
            <input id="user-input" class="user-input" type="text" placeholder="Type your question here"></input>
            <button onclick="handleSendButton()" class="sendButton">
                <img src="send.png" height="20px" style="opacity: 0.4;">
            </button>
        </div>

    </body>

    <script>
        const botElements = document.getElementsByClassName("bot");
        for (let i=0; i < botElements.length; i++) {
            const botEl = botElements[i];
            
            const imgEl = document.createElement("img");
            imgEl.setAttribute("src", "Chatbot.png");
            imgEl.setAttribute("height", "30");
            imgEl.setAttribute("width", "30");

            botEl.parentNode.insertBefore(imgEl, botEl);
        };
        let inputEl = document.getElementById("user-input");
        inputEl.addEventListener("keypress", (event) => {
            if (event.key === 'Enter') {handleSendButton();}
        });

        const handleSendButton = () => {
            const inputValue = inputEl.value;
            inputEl.value = "";

            // add input text to chat
            let newUserInput_containerEl = document.createElement("div");
            newUserInput_containerEl.setAttribute("class", "user-text-container");
            let newUserInput_textEl = document.createElement("div");
            newUserInput_textEl.setAttribute("class", "text user");
            newUserInput_textEl.innerHTML = inputValue;

            newUserInput_containerEl.appendChild(newUserInput_textEl);
            document.getElementsByClassName("chat-container")[0].appendChild(newUserInput_containerEl);

            // add classes for display in side bar
            document.getElementsByClassName("body")[0].classList.add("body-max");
            document.getElementsByClassName("chat-container")[0].classList.add("chat-container-max");
            
            const botElements = document.getElementsByClassName("bot");
            for (let i=0; i < botElements.length; i++) {
                const botEl = botElements[i];
                botEl.classList.add("bot-max");
            };
            const userElements = document.getElementsByClassName("user");
            for (let i=0; i < userElements.length; i++) {
                const userEl = userElements[i];
                userEl.classList.add("user-max");
            };
            const textElements = document.getElementsByClassName("text");
            for (let i=0; i < textElements.length; i++) {
                const textEl = textElements[i];
                textEl.classList.add("text-max");
            };

            document.getElementsByClassName("input-container")[0].classList.add("input-container-max");
            document.getElementsByClassName("user-input")[0].classList.add("user-input-max");

        }

    </script>
</html>